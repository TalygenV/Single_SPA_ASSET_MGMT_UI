import{Z as H,_ as k,R as L,r as P,o as p,c,a as r,h as C,w as _,t as E,F as R,f as S,d as D,b as N,y as b,p as Y,e as y,E as B,G as X,s as z,u as j,n as T,i as w,q as x,A as U}from"./index.39612647.js";import{V as J}from"./vue3-apexcharts.common.612ee77c.js";import{_ as q}from"./Pager.c489888d.js";import{p as M}from"./pdfmake.cd2ff334.js";H("required",e=>!e||!e.toString().length?"This field is required":!0);const Z={data(){return{isLoading:!1,isFilterExist:0,selectedOPValue:"",GetOperator:[],options:[],ValueDisplaytext:"",ValueDisplaytext2:"",ValueDisplaynumber:"",ValueDisplaynumber2:"",ValueDisplaydate:"",ValueDisplaydate2:"",modelFilterDDLValue:"",dropdwonvalues:[],texttypevalue1:!1,texttypevalue2:!1,numbertypevalue1:!1,numbertypevalue2:!1,datetypevalue1:!1,datetypevalue2:!1,multiselectvalue:!1,DDLForFilter:!1,SelectedoperatorMappedDatatype:"",CurrentOperatorSelected:"",savedOperatorName:"",operator_id:null,isBinding:!1,ArrayforFilterpopup:[],FilterClose:!1}},props:{reportListingInfo:{type:Array}},created(){var e=this;e.GetDropDownValueOnFilter()},watch:{FilterClose(e){e&&this.GetDropDownValueOnFilter()}},mounted:function(){$("#modalViewCustomReportFilter").modal({backdrop:"static",keyboard:!1})},methods:{close(){$("#modalViewCustomReportFilter").modal("hide"),$("body").removeClass("modal-open"),$(".modal-backdrop").remove(),this.$emit("close")},OpenFilterPopup(e,t){var a=this;e.selectedOPValue="",$(".filter-list-box").width("0px").css("overflow","hidden"),$(t.target).closest(".parentdiv").find(".filter-list-box").width("500px").css("overflow","visible"),a.GetOperatordata(e),a.texttypevalue1=!1,a.texttypevalue2=!1,a.numbertypevalue1=!1,a.datetypevalue1=!1,a.datetypevalue2=!1,a.multiselectvalue=!1,a.numbertypevalue2=!1,a.DDLForFilter=!1,a.dropdwonvalues=[],a.ValueDisplaytext="",a.ValueDisplaynumber="",a.ValueDisplaynumber2="",a.ValueDisplaydate="",a.ValueDisplaydate2=""},ClosePopFilter(){var e=this;$(".filter-list-box").width("0px").css("overflow","hidden"),e.texttypevalue1=!1,e.texttypevalue2=!1,e.numbertypevalue1=!1,e.numbertypevalue2=!1,e.datetypevalue1=!1,e.datetypevalue2=!1,e.multiselectvalue=!1,e.DDLForFilter=!1,e.multiselectvalue=!1,e.ValueDisplaytext="",e.ValueDisplaynumber="",e.ValueDisplaynumber2="",e.ValueDisplaydate="",e.ValueDisplaydate2="",e.dropdwonvalues=[]},resetthevalueofoperator:function(){var e=this;e.dropdwonvalues=[],e.ValueDisplaytext="",e.ValueDisplaytext2="",e.ValueDisplaynumber="",e.ValueDisplaynumber2="",e.ValueDisplaydate="",e.ValueDisplaydate2="",e.Displaymultiplevalue=""},checkvalue:function(e,t,a,l){var o=this;e.ColumnFieldDataCode==="select"&&e.PickListOption==="Lookup"&&o.GetFilterSelectDDL(e),setTimeout(function(){o.savedOperatorName="",o.SelectedoperatorMappedDatatype=e.ColumnFieldDataCode,o.CurrentOperatorSelected=l,o.savedOperatorName=a,o.operator_id=t,o.SelectedoperatorMappedDatatype=="string"?o.savedOperatorName=="Between"?(o.texttypevalue1=!0,o.texttypevalue2=!0):o.savedOperatorName=="Is Empty"||o.savedOperatorName=="Is Not Empty"?(o.texttypevalue1=!1,o.texttypevalue2=!1):(o.texttypevalue1=!0,o.texttypevalue2=!1):o.SelectedoperatorMappedDatatype=="decimal"||o.SelectedoperatorMappedDatatype=="int"||o.SelectedoperatorMappedDatatype=="bigint"?o.savedOperatorName=="Between"?(o.numbertypevalue1=!0,o.numbertypevalue2=!0):o.savedOperatorName=="Is Empty"||o.savedOperatorName=="Is Not Empty"?(o.numbertypevalue1=!1,o.numbertypevalue2=!1):(o.numbertypevalue1=!0,o.numbertypevalue2=!1):o.SelectedoperatorMappedDatatype==="select"&&e.PickListOption==="Lookup"?o.savedOperatorName=="Is Empty"||o.savedOperatorName=="Is Not Empty"?(o.DDLForFilter=!1,o.multiselectvalue=!1,o.texttypevalue1=!1,o.texttypevalue2=!1):o.savedOperatorName=="Equal to one of multiple possible values"||o.savedOperatorName=="Not Equal to one of multiple possible values"?(o.multiselectvalue=!0,o.DDLForFilter=!1):(o.DDLForFilter=!0,o.multiselectvalue=!1,o.texttypevalue1=!1,o.texttypevalue2=!1):o.SelectedoperatorMappedDatatype==="date"&&(o.savedOperatorName=="Between"?(o.datetypevalue1=!0,o.datetypevalue2=!0):o.savedOperatorName=="Is Empty"||o.savedOperatorName=="Is Not Empty"||o.savedOperatorName=="Is Off Day"||o.savedOperatorName=="Is Week End"?(o.datetypevalue1=!1,o.datetypevalue2=!1):(o.datetypevalue1=!0,o.datetypevalue2=!1)),o.operator_id!=null&&o.savedOperatorName!=null&&(o.dropdwonvalues=[],o.ValueDisplaytext="",o.ValueDisplaytext2="",o.ValueDisplaynumber="",o.ValueDisplaynumber2="",o.ValueDisplaydate="",o.ValueDisplaydate2="",o.modelFilterDDLValue="",e.OPERATOR_ID==o.operator_id&&o.FillFilterValues(t,e)),e.OPERATOR_ID!=o.operator_id&&o.resetthevalueofoperator()},1e3)},FillFilterValues(e,t){var a=this;a.ArrayforFilterpopup.push(t);var l=a.ArrayforFilterpopup.findIndex(d=>d.OPERATOR_ID==e);if(l>-1){var o=a.ArrayforFilterpopup.find(d=>d.OPERATOR_ID==e);if(t.ColumnFieldDataCode=="string")a.ValueDisplaytext=o==null?void 0:o.Value1,a.ValueDisplaytext2=o==null?void 0:o.Value2;else if(t.ColumnFieldDataCode=="decimal"||t.ColumnFieldDataCode=="int"||t.ColumnFieldDataCode=="bigint")a.ValueDisplaynumber=o==null?void 0:o.Value1,a.ValueDisplaynumber2=o==null?void 0:o.Value2;else if(t.ColumnFieldDataCode==="date")a.ValueDisplaydate=o==null?void 0:o.Value1,a.ValueDisplaydate2=o==null?void 0:o.Value2;else if(t.ColumnFieldDataCode==="select"&&t.PickListOption==="Lookup")if(a.CurrentOperatorSelected=="IN"||a.CurrentOperatorSelected=="NOT IN"){var n=o==null?void 0:o.Value1.replace(/"|'/g,"");a.dropdwonvalues=n==null?void 0:n.split(",")}else a.modelFilterDDLValue=o==null?void 0:o.Value1}},GetFilterSelectDDL(e){var t=this;e.selectOptions=[];var a=[];t.isLoading=!0,L.GetFilterDDLselectvalue(e.CustomFieldId).then(l=>{l.data.length>0&&(a=l.data,a.forEach(o=>{e.selectOptions.push({value:o.value,label:o.name})})),t.isLoading=!1}).catch(l=>{console.log(l)})},GetOperatordata(e){var t=this,a=e.CustomFieldId,l=`dataType=${e.ColumnFieldDataCode}&customField=${a}`;L.GetDataOperator(l).then(o=>{if(e.OperatorList=o.data.DATA,e.selectedOPValue=parseInt(e.OPERATOR_ID),e.OPERATOR_ID>0){let u=e.OperatorList.find(h=>h.OPERATOR_ID==e.OPERATOR_ID);e.OperatorExpression=u.OPERATOR_EXPRESSION;var n=t.GetOperator.filter(h=>h.OPERATOR_ID==e.OPERATOR_ID);if(n.length>0){var d=!0;t.isBinding=d,t.checkvalue(e,e.OPERATOR_ID,n[0].OPERATOR_DISPLAY_NAME,n[0].OPERATOR_EXPRESSION,d)}}})},applySetting(e,t){var f;var a=this,a=this,l=[];a.dropdwonvalues.forEach(m=>{const A=a.options.find(G=>G.value===m);A!=-1&&A!=null&&l.push(A.label)}),a.dropdwonvalues!=""&&(a.commaSepratedSelectedValues=(f=a.dropdwonvalues)==null?void 0:f.join(),a.modelFilterDDLValue="");var o="";a.modelFilterDDLValue!=""&&(o=a.options.find(m=>m.value===a.modelFilterDDLValue));var n=a.reportListingInfo.FILTERS.find(m=>m.CustomFieldId===e);n.operator_display_name=a.savedOperatorName,n.Value1=a.ValueDisplaytext,n.Value2=a.ValueDisplaytext2,n.Value1=a.ValueDisplaynumber,n.Value2=a.ValueDisplaynumber2,n.Value1=a.ValueDisplaydate,n.Value2=a.ValueDisplaydate2,n.MultiDropDown=l==null?void 0:l.join(),n.SingleDropDown=o==null?void 0:o.label,n.OPERATOR_ID=a.operator_id;var d="",u="",h="",v="";if(a.SelectedoperatorMappedDatatype==null&&a.CurrentOperatorSelected==null){var s=a.GetOperator.find(m=>m.OPERATOR_ID===parseInt(n.OPERATOR_ID));a.SelectedoperatorMappedDatatype=s.MP[0].OPERATION_DATA_TYPE,a.CurrentOperatorSelected=s.OPERATOR_EXPRESSION,a.savedOperatorName=s.OPERATOR_DISPLAY_NAME}if(n.ColumnFieldDataCode=="select"||n.PickListOption=="Lookup")if(a.CurrentOperatorSelected=="IN"||a.CurrentOperatorSelected=="NOT IN"){let m=a.commaSepratedSelectedValues;d=m,h=m}else d="'"+a.modelFilterDDLValue+"'",h=a.modelFilterDDLValue;n.ColumnFieldDataCode=="date"&&(n.operator_display_name=="Between"?(d="'"+a.ValueDisplaydate+"'",h=a.ValueDisplaydate,u="'"+a.ValueDisplaydate2+"'",v=a.ValueDisplaydate2):(d="'"+a.ValueDisplaydate+"'",h=a.ValueDisplaydate)),n.ColumnFieldDataCode=="string"&&(a.CurrentOperatorSelected=="IN"||a.CurrentOperatorSelected=="NOT IN"?(d=a.ValueDisplaytext,h=a.ValueDisplaytext2,(n.operator_display_name=="Equal to one of multiple possible values"||n.operator_display_name=="Not Equal to one of multiple possible values")&&(h=a.ValueDisplaytext.split(","))):(d="'"+a.ValueDisplaytext+"'",h=a.ValueDisplaytext)),(n.ColumnFieldDataCode=="decimal"||n.ColumnFieldDataCode=="int"||n.ColumnFieldDataCode=="bigint")&&(n.operator_display_name=="Between"?(d="'"+a.ValueDisplaynumber+"'",h=a.ValueDisplaynumber,u="'"+a.ValueDisplaynumber2+"'",v=a.ValueDisplaynumber2):(d="'"+a.ValueDisplaynumber+"'",v=a.ValueDisplaynumber));var g=a.reportListingInfo.FILTERS.find(m=>m.CustomFieldId===e),i=a.GetOperator.find(m=>m.OPERATOR_ID===g.selectedOPValue),O=a.ConvertOperatorToExpression(i.OPERATOR_EXPRESSION,d,u);g.OPERATOR_ID=i.OPERATOR_ID,g.OperatorExpression=O,g.Value1=h,g.Value2=v,g.operator_display_name=i.OPERATOR_DISPLAY_NAME},async ApplyNewFilterToList(){var e=this;this.reportListingInfo.FILTERS.forEach(function(t){let a=t.OperatorList.find(n=>n.OPERATOR_ID==t.OPERATOR_ID),l="'"+t.Value1+"'",o="'"+t.Value2+"'";t.ColumnFieldDataCode=="select"&&(a.OPERATOR_EXPRESSION=="IN"||a.OPERATOR_EXPRESSION=="NOT IN")&&(l="'"+t.Value1.join("','")+"'"),(t.ColumnFieldDataCode=="decimal"||t.ColumnFieldDataCode=="int"||t.ColumnFieldDataCode=="bigint")&&(t.Value1=t.Value1==""?0:t.Value1,t.Value2=t.Value2==""?0:t.Value2,l=t.Value1,o=t.Value2),t.OperatorExpression=e.ConvertOperatorToExpression(a.OPERATOR_EXPRESSION,l,o)}),e.isLoading=!0,e.reportListingInfo.GRAPH.length>0&&await e.$parent.SetGroupDataforGraph([],e.reportListingInfo.FILTERS),e.$parent.UpdatePreviewData([],e.reportListingInfo.FILTERS),e.isLoading=!1,e.close()},RemoveNewFilterFromList(){var e=this;e.$parent.RemoveNewFilterFromList(),e.close()},PreventValues(e){var t=e.keyCode;(t==69||t==107||t==109)&&e.preventDefault()},GetDropDownValueOnFilter(){var e=this;console.log(e.reportListingInfo.FILTERS),e.reportListingInfo.FILTERS.forEach(t=>{if(e.GetOperatordata(t),t.OperatorList=[],typeof t.isManuallyAdded=="undefined"&&(t.isManuallyAdded=!1),t.ColumnFieldDataCode=="select"&&t.PickListOption=="Lookup"){var a=[],l=[];e.GetFilterSelectDDL(t),setTimeout(function(){if(t.operator_display_name=="Equal to one of multiple possible values")l=t.Value1.split(","),l.forEach(n=>{const d=e.options.find(u=>u.value===n);d!=-1&&d!=null&&a.push(d.label),t.MultiDropDown=a==null?void 0:a.join()});else{var o="";o=e.options.find(n=>n.value===n.Value1),o!=null&&(t.SingleDropDown=o.label)}},1e3)}})},AddFilterRow:function(){var e=this;this.$refs.FilterForm.validate().then(function(t){t.valid&&e.reportListingInfo.FILTERS.push({isManuallyAdded:!0,CustomFieldId:"",FieldName:"",ActualDataType:"string",OperatorExpression:"",FilterTypeAndorOr:"AND",OPERATOR_ID:"",operator_display_name:"",Value1:"",Value2:"",IsMandatoryforFilter:!1,FieldIcons:"",DisplayName:"",PickListOption:null,ColumnFieldDataCode:"",selectedOPValue:"",selectOptions:[]})})},OnChangeFieldDdl:function(e){e.OperatorExpression="",e.OPERATOR_ID="",e.selectOptions=[],this.reportListingInfo.FIELDS.forEach(function(t){t.CustomFieldId==e.CustomFieldId&&(e.DisplayName=t.DisplayName,e.ActualDataType=t.ColumnFieldDataCode,e.ColumnFieldDataCode=t.ColumnFieldDataCode,e.FieldName=t.FieldName,e.FieldIcons=t.FieldIcons,e.FieldIcons=t.FieldIcons)}),this.GetOperatordata(e)},OnChangeOperator:function(e){var t=this;e.selectOptions=[];var a=[];if(t.isLoading=!0,e.OPERATOR_ID>0){let l=e.OperatorList.find(o=>o.OPERATOR_ID===e.OPERATOR_ID);e.OperatorExpression=l.OPERATOR_EXPRESSION,e.OperatorExpression=="IN"||e.OperatorExpression=="NOT IN"?e.Value1=[]:e.Value1=""}L.GetFilterDDLselectvalue(e.CustomFieldId).then(l=>{l.data.length>0&&(a=l.data,a.forEach(o=>{e.selectOptions.push({value:o.value,label:o.name})})),t.isLoading=!1}).catch(l=>{console.log(l)})},DeleteFilterRow:function(e){this.reportListingInfo.FILTERS.splice(e,1)},TruncateStr:function(e,t){var a=""+e;if(a!=null)return a.length<=t?e:a.substring(0,t)+"..."}}},F=e=>(B("data-v-05bc784b"),e=e(),X(),e),W={id:"modalViewCustomReportFilter",role:"dialog",class:"modal my-popups centre fade"},K={role:"document",class:"modal-dialog"},Q={class:"modal-content"},ee={class:"modal-header mheader-user"},te=F(()=>r("em",{"aria-hidden":"true",class:"fa fa-times"},null,-1)),ae=[te],oe={id:"myModalLabel",class:"modal-title"},re={class:"modal-body"},se={class:"list-item row filter-div"},le={class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 float-left"},ne={class:"form-content"},ie={id:"divshowSearchCriteriaList",class:"col-sm-12 col-md-12 col-lg-12 col-xl-12 p-0 float-left"},de={class:"heading-border"},pe={class:"h5"},ue=F(()=>r("span",null," Filter",-1)),ce={class:"float-right"},me=F(()=>r("em",{class:"fa fa-plus pr-2"},null,-1)),fe=y(" Add "),he=[me,fe],ge={class:"listing mt-2"},Ee={class:"table-responsive overflow-visible"},De={"aria-describedby":"serachfilter",class:"table table-bordered dt-responsive nowrap mt-0 dataTable no-footer dtr-inline"},Ie=F(()=>r("thead",{class:"thead-bg"},[r("tr",null,[r("th",{scope:"col",style:{"min-width":"180px"}},[r("span",null,"Name")]),r("th",{scope:"col",style:{"min-width":"180px"}},[r("span",null,"Operator")]),r("th",{scope:"col",style:{"min-width":"480px"}},[r("span",null,"Value")]),r("th",{scope:"col",style:{"min-width":"50px"}},[r("span",null,"Action")])])],-1)),ve={key:0},ye=["onChange"],Oe=F(()=>r("option",{value:""},"Select field",-1)),Re=["value","disabled"],Se=["onChange"],_e=F(()=>r("option",{value:""},"Select Operator",-1)),Le=["value"],Fe={key:0},be=["min"],Ne=F(()=>r("option",{value:""},"Select value",-1)),Ae=["value"],Pe={key:0,class:"multiselect-multiple-label"},Ce={class:"multiselect-tags","data-tags":""},Te=["aria-label"],we=F(()=>r("span",{class:"multiselect-tag-remove"},[r("span",{class:"multiselect-tag-remove-icon"})],-1)),Ve={key:0},Ge={class:"text-center"},xe=["onClick"],Me={key:0,class:"fa fa-trash text-danger pr-2"},Ue={key:0},ke={key:1},Be=F(()=>r("td",{colspan:"10",class:"text-center text-danger py-3"},"No record(s) found",-1)),$e=[Be],Xe={class:"col-12 mb-3 mr-auto d-flex align-items-center justify-content-end"},He=F(()=>r("button",{class:"btn btn-success my-2 my-sm-0 mr-2 pl-1"},[y("\u2004"),r("span",{class:"fa fa-search"}),y(" Search")],-1)),Ye=y("\u2004 "),ze=F(()=>r("span",{class:"fa fa-times"},null,-1)),je=y(" Reset Filter"),Je=[Ye,ze,je];function qe(e,t,a,l,o,n){const d=P("loader"),u=P("Field"),h=P("Multiselect"),v=P("Form");return p(),c("div",W,[r("div",K,[r("div",Q,[C(v,{onSubmit:t[5]||(t[5]=s=>n.ApplyNewFilterToList()),ref:"FilterForm"},{default:_(()=>[r("div",ee,[r("button",{type:"button",class:"close",onClick:t[0]||(t[0]=s=>n.close())},ae),r("h4",oe,E(e.$t("FILTER")),1)]),r("div",re,[C(d,{"is-visible":o.isLoading},null,8,["is-visible"]),r("div",se,[r("div",le,[r("div",ne,[r("div",ie,[r("div",de,[r("h5",pe,[ue,r("small",ce,[r("a",{href:"javascript:;",style:{cursor:"pointer"},title:"Add",onClick:t[1]||(t[1]=s=>n.AddFilterRow())},he)])])]),r("div",ge,[r("div",Ee,[r("table",De,[Ie,r("tbody",null,[a.reportListingInfo.FILTERS.length>0?(p(!0),c(R,{key:0},S(a.reportListingInfo.FILTERS,(s,g)=>(p(),c("tr",null,[r("td",null,[s.isManuallyAdded?D("",!0):(p(),c("span",ve,E(e.GetLocalizedValue(s.FieldName,s.DisplayName)),1)),s.isManuallyAdded?(p(),N(u,{key:1,name:"Field"+g,rules:"required",modelValue:s.CustomFieldId,"onUpdate:modelValue":i=>s.CustomFieldId=i},{default:_(({field:i,errors:O,errorMessage:f,meta:m})=>[r("select",b(i,{class:{"form-control":!0,"is-invalid":f},onChange:A=>n.OnChangeFieldDdl(s)}),[Oe,(p(!0),c(R,null,S(a.reportListingInfo.FIELDS,A=>(p(),c("option",{value:A.CustomFieldId,disabled:a.reportListingInfo.FILTERS.filter(G=>G.CustomFieldId==A.CustomFieldId).length>0},E(e.GetLocalizedValue(A.FieldName,A.DisplayName)),9,Re))),256))],16,ye)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])):D("",!0)]),r("td",null,[C(u,{name:"Operator"+g,rules:"required",modelValue:s.OPERATOR_ID,"onUpdate:modelValue":i=>s.OPERATOR_ID=i},{default:_(({field:i,errors:O,errorMessage:f})=>[r("select",b(i,{class:{"form-control":!0,"is-invalid":f},onChange:m=>n.OnChangeOperator(s)}),[_e,(p(!0),c(R,null,S(s.OperatorList,m=>(p(),c("option",{value:m.OPERATOR_ID},E(m.OPERATOR_DISPLAY_NAME),9,Le))),256))],16,Se)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])]),r("td",{style:Y(s.ActualDataType=="select"&&(s.OperatorExpression=="IN"||s.OperatorExpression=="NOT IN")?"display: contents;":"")},[s.OperatorExpression=="Is Not Null"||s.OperatorExpression=="Is Null"?(p(),c("span",Fe,"--")):D("",!0),s.ActualDataType=="string"&&s.OperatorExpression!="Is Not Null"&&s.OperatorExpression!="Is Null"?(p(),N(u,{key:1,name:"StringFirstValue"+g,rules:"required",modelValue:s.Value1,"onUpdate:modelValue":i=>s.Value1=i},{default:_(({field:i,errors:O,errorMessage:f})=>[r("input",b({type:"text"},i,{id:"inpttxt",class:{"form-control":!0,"is-invalid":f},style:s.OperatorExpression=="between"?"width: 45%;float: left;":""}),null,16)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])):D("",!0),s.ActualDataType=="string"&&s.OperatorExpression=="between"?(p(),N(u,{key:2,name:"StringSecondValue"+g,rules:"required",modelValue:s.Value2,"onUpdate:modelValue":i=>s.Value2=i},{default:_(({field:i,errors:O,errorMessage:f})=>[r("input",b(i,{type:"text",id:"inpttxt2",class:{"form-control":!0,"is-invalid":f},style:{width:"45%",float:"left","margin-left":"50px"}}),null,16)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])):D("",!0),(s.ActualDataType=="decimal"||s.ActualDataType=="int"||s.ActualDataType=="bigint")&&s.OperatorExpression!="Is Not Null"&&s.OperatorExpression!="Is Null"?(p(),N(u,{key:3,name:"NumberFirstValue"+g,rules:"required",modelValue:s.Value1,"onUpdate:modelValue":i=>s.Value1=i},{default:_(({field:i,errors:O,errorMessage:f})=>[r("input",b(i,{type:"number",id:"inpttxtbtw",class:{"form-control":!0,"is-invalid":f},style:s.OperatorExpression=="between"?"width: 45%;float: left;":"",onKeydown:t[2]||(t[2]=m=>n.PreventValues(m))}),null,16)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])):D("",!0),(s.ActualDataType=="decimal"||s.ActualDataType=="int"||s.ActualDataType=="bigint")&&s.OperatorExpression=="between"?(p(),N(u,{key:4,name:"NumberSecondValue"+g,rules:"required",modelValue:s.Value2,"onUpdate:modelValue":i=>s.Value2=i},{default:_(({field:i,errors:O,errorMessage:f})=>[r("input",b(i,{type:"number",id:"inpttxtbtw",class:{"form-control":!0,"is-invalid":f},style:{width:"45%",float:"left","margin-left":"50px"},onKeydown:t[3]||(t[3]=m=>n.PreventValues(m))}),null,16)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])):D("",!0),(s.ActualDataType=="date"||s.ActualDataType=="datetime")&&s.OperatorExpression!="Is Not Null"&&s.OperatorExpression!="Is Null"?(p(),N(u,{key:5,name:"DateFirstValue"+g,rules:"required",modelValue:s.Value1,"onUpdate:modelValue":i=>s.Value1=i},{default:_(({field:i,errors:O,errorMessage:f})=>[r("input",b(i,{type:"date",id:"inpttxtdate1",class:{"form-control":!0,"is-invalid":f},style:s.OperatorExpression=="between"?"width: 45%;float: left;":""}),null,16)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])):D("",!0),(s.ActualDataType=="date"||s.ActualDataType=="datetime")&&s.OperatorExpression=="between"?(p(),N(u,{key:6,name:"DateSecondValue"+g,rules:"required",modelValue:s.Value2,"onUpdate:modelValue":i=>s.Value2=i},{default:_(({field:i,errors:O,errorMessage:f})=>[r("input",b({type:"date"},i,{min:s.Value1,class:{"form-control":!0,"is-invalid":f},style:{width:"45%",float:"left","margin-left":"20px"}}),null,16,be)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])):D("",!0),s.ActualDataType=="select"&&s.OperatorExpression!="IN"&&s.OperatorExpression!="NOT IN"&&s.OperatorExpression!="Is Not Null"&&s.OperatorExpression!="Is Null"?(p(),N(u,{key:7,name:"Selectddl"+g,rules:"required",modelValue:s.Value1,"onUpdate:modelValue":i=>s.Value1=i},{default:_(({field:i,errors:O,errorMessage:f})=>[r("select",b(i,{class:{"form-control":!0,"is-invalid":f}}),[Ne,(p(!0),c(R,null,S(s.selectOptions,m=>(p(),c("option",{key:m.value,value:m.value},E(m.label),9,Ae))),128))],16)]),_:2},1032,["name","modelValue","onUpdate:modelValue"])):D("",!0),s.ActualDataType=="select"&&(s.OperatorExpression=="IN"||s.OperatorExpression=="NOT IN")?(p(),N(u,{key:8,name:"MultiSelectddl"+g,rules:"required",modelValue:s.Value1,"onUpdate:modelValue":i=>s.Value1=i},{default:_(({field:i,errors:O,errorMessage:f})=>[r("div",null,[C(h,b(i,{class:{"form-control":!0,"is-invalid":f},multiple:!0,label:"label","track-by":"label",placeholder:"Select",searchable:!0,mode:"multiple",hideSelected:!1,"close-on-select":!1,options:s.selectOptions}),{multiplelabel:_(({values:m})=>[m&&m.length>0?(p(),c("div",Pe,[r("div",Ce,[r("span",{class:"multiselect-tag",tabindex:"-1","aria-label":m[0].label},[y(E(n.TruncateStr(m[0].label,18))+" ",1),we],8,Te)]),m&&m.length>1?(p(),c("span",Ve,E(m.length)+" options selected ",1)):D("",!0)])):D("",!0)]),_:2},1040,["class","options"])])]),_:2},1032,["name","modelValue","onUpdate:modelValue"])):D("",!0)],4),r("td",Ge,[r("a",{href:"javascript:;",onClick:i=>n.DeleteFilterRow(g)},[s.isManuallyAdded?(p(),c("em",Me)):D("",!0)],8,xe),s.isManuallyAdded?D("",!0):(p(),c("span",Ue,"--"))])]))),256)):D("",!0),a.reportListingInfo.FILTERS.length==0?(p(),c("tr",ke,$e)):D("",!0)])])])])])])])])]),r("div",Xe,[He,r("a",{class:"btn btn-danger pl-1 mb-0",onClick:t[4]||(t[4]=s=>n.RemoveNewFilterFromList())},Je)])]),_:1},512)])])])}var Ze=k(Z,[["render",qe],["__scopeId","data-v-05bc784b"]]);const{GetUserInfo:V}=z(j());M.vfs=void 0;const We={components:{VueApexCharts:J,Pager:q,modalViewCustomReportFilter:Ze},data(){return{showViewCustomReportFilter:!1,isFilterExist:0,isLoading:!1,showdata:!1,showcoldata:!0,showgraph:!1,reportName:"",showGraphBtn:!0,isSortPopup:!1,sortColummnarray:[{sortcolummnId:"",columnOrders:""}],SortExp:null,SortBy:null,chartTypes:null,chartType:"",chartOptions:{},chartSeries:[],chartOptionXAxisData:[],chartSeriesData:[],colourList:["#8892d0","#da9c49","#94c5a3","#e67d21","#787878","#c59e71","#38b8df","#f55e1a","#207a92","#13599c"],AggregateFuncField:null,aggregateFunctionResult:0,XAxisFieldName:null,YAxisFieldName:null,groupGraphlist:[],GraphJson:[],previewcolumn:[],previewgroupdata:[],reportListingInfo:[],previewdata:[],CanEdit:!0,TotalRecords:0,PageNumber:1,PageSize:10,TotalPages:0,allReocrdsData:null,TableBody:[],TableHeader:[],pdfpreviewdata:[],ExcelJsonData:null,count:0,IsForPreview:0,SingleSortArray:[],MainSortingArray:[],MainUpdatedArray:[]}},created:async function(){var e=this;e.isLoading=!0,await e.GetChartTypes(),await e.GetPreviewData(e.$route.params.ReportID),e.$route.params.ACCESS==1?e.CanEdit=!1:e.CanEdit=!0},methods:{OpenFilter:function(){var e=this;e.showViewCustomReportFilter=!0,$("#modalViewCustomReportFilter").modal("show"),setTimeout(function(){$("#modalViewCustomReportFilter").modal("show"),setTimeout(function(){e.SetBootstraptoolTip()},200)},1e3)},RemoveNewFilterFromList(){var e=this;e.isLoading=!0,e.GetPreviewData(e.$route.params.ReportID),e.MainUpdatedArray=[],e.noRecord=!1},OpenGraph(){var e=this;e.showgraph?e.showgraph=!1:e.showgraph=!0},OnBack:function(){var e=this;e.$router.push({name:"CustomReports"})},GetPreviewData(e){var t=this,a=`ReportId=${e}&IsPaged=1`;L.GetReportDetailsbyId(a).then(async l=>{if(l.data!=null&&l.data!=null&&l.data!=""){t.reportListingInfo=l.data.JSON_To_Create_ReportListing[0].Info,t.isFilterExist=t.reportListingInfo.FILTERS.length;var o=l.data.ReportListing;t.reportName=t.reportListingInfo.REPORTNAME,t.previewcolumn=[],o!=null&&o!=null&&o==1?(t.reportListingInfo.GRAPH.length>0&&await t.SetGroupDataforGraph(),await t.UpdatePreviewData(),await t.GetSortingData(),t.BindGraph()):(t.noRecord=!0,t.showgraph=!1,t.showGraphBtn=!1,t.isLoading=!1)}else t.noRecord=!0,t.showgraph=!1,t.showGraphBtn=!1,t.isLoading=!1})},Bindlisting:function(e){var t=this;if(e!=null&&e!=null){for(let a in t.reportListingInfo.FIELDS)t.reportListingInfo.FIELDS[a].FieldName&&t.reportListingInfo.FIELDS[a].DisplayName!="ROWNUMBER"&&t.reportListingInfo.FIELDS[a].FieldName!="Total_Records"&&t.reportListingInfo.FIELDS[a].DisplayName!="Total_Records"&&t.previewcolumn.push({FieldName:t.reportListingInfo.FIELDS[a].DisplayName!=null&&t.reportListingInfo.FIELDS[a].DisplayName!=""?t.reportListingInfo.FIELDS[a].DisplayName:t.reportListingInfo.FIELDS[a].FieldName,CustomFieldId:t.reportListingInfo.FIELDS[a].CustomFieldId});t.noRecord=!1}else t.noRecord=!0},BindGroupListing:function(e){var t=this;if(t.previewgroupdata=[],t.showdata=!0,t.showcoldata=!1,e!=null&&e!=null){for(let a in t.reportListingInfo.GROUP){t.previewgroupdata.push({FieldName:t.reportListingInfo.GROUP[a].DisplayName!=null&&t.reportListingInfo.GROUP[a].DisplayName!=""?t.reportListingInfo.GROUP[a].DisplayName:t.reportListingInfo.GROUP[a].FieldName});for(let l in t.reportListingInfo.FIELDS)t.reportListingInfo.GROUP[a].FieldName!=t.reportListingInfo.FIELDS[l].FieldName&&t.previewcolumn.push({FieldName:t.reportListingInfo.FIELDS[l].DisplayName!=null&&t.reportListingInfo.FIELDS[l].DisplayName!=""?t.reportListingInfo.FIELDS[l].DisplayName:t.reportListingInfo.FIELDS[l].FieldName})}t.noRecord=!1}else t.noRecord=!0},async SetGroupDataforGraph(e,t){var a=this,l={Info:{REPORTID:a.reportListingInfo.REPORTID,REPORTNAME:a.reportListingInfo.REPORTNAME,MODULENAME:a.reportListingInfo.MODULENAME,SUBMODULECODE:a.reportListingInfo.SUBMODULECODE,SUBMODULEID:a.reportListingInfo.SUBMODULEID,PAGESIZE:parseInt(a.PageSize),PAGENUMBER:parseInt(a.PageNumber),IS_PAGED:0,IsForPreview:a.IsForPreview,FIELDS:a.reportListingInfo.FIELDS,FILTERS:t==null?a.reportListingInfo.FILTERS:t,GROUP:[],CHARTGROUPARRAY:a.reportListingInfo.CHARTGROUPARRAY,SORTING:a.reportListingInfo.SORTING,GRAPH:a.reportListingInfo.GRAPH,EXPRESSION:a.reportListingInfo.EXPRESSION,EXPRESSIONFIELDSARRAY:a.reportListingInfo.EXPRESSIONFIELDSARRAY}},o=JSON.stringify(l);await L.PreviewReport(o).then(n=>{n.data!=null&&n.data!=null&&(a.groupGraphlist=JSON.parse(n.data[0].Value),t!=null&&a.BindGraph())}).catch(n=>{console.log(n)})},UpdatePreviewData(e,t){var a=this;a.isLoading=!0;var l=[];a.MainSortingArray=e,a.MainUpdatedArray=t;for(var o in e)e[o].sortcolummnId!=null&&e[o].sortcolummnId!=""&&(l.push({CustomFieldId:e[o].sortcolummnId,SORTTYPE:e[o].columnOrders,SortIndex:parseInt(o),Calculated_Field:""}),a.reportListingInfo.FIELDS.forEach(u=>{var h=l.find(v=>v.CustomFieldId===u.CustomFieldId);h!=null&&(h.Calculated_Field=u.Calculated_Field)}));var n={Info:{REPORTID:a.reportListingInfo.REPORTID,REPORTNAME:a.reportListingInfo.REPORTNAME,MODULENAME:a.reportListingInfo.MODULENAME,SUBMODULECODE:a.reportListingInfo.SUBMODULECODE,SUBMODULEID:a.reportListingInfo.SUBMODULEID,PAGESIZE:a.PageSize,PAGENUMBER:parseInt(a.PageNumber),IS_PAGED:1,IsForPreview:a.IsForPreview,FIELDS:a.reportListingInfo.FIELDS,FILTERS:t==null?a.reportListingInfo.FILTERS:t,GROUP:a.reportListingInfo.GROUP,SORTING:l==null||l==[]||l.length==0?a.reportListingInfo.SORTING:l,EXPRESSION:a.reportListingInfo.EXPRESSION,EXPRESSIONFIELDSARRAY:a.reportListingInfo.EXPRESSIONFIELDSARRAY,SINGLE_SORT:a.SingleSortArray}},d=JSON.stringify(n);L.PreviewReport(d).then(async u=>{if(u.data!=null&&u.data!=null){a.previewcolumn=[];var h=JSON.parse(u.data[0].Value);if(h!=null&&h!=null){var v=h.MetaData[0];a.previewdata=h.ListingData,a.TotalRecords=v.TotalRecord,a.TotalPages=Math.ceil(a.TotalRecords/a.PageSize),v.IsGrouping?a.BindGroupListing(a.previewdata):a.Bindlisting(a.previewdata)}else a.noRecord=!0,a.TotalRecords=0,a.showgraph=!1,a.showGraphBtn=!1;a.isLoading=!1}else a.isLoading=!1}).catch(u=>{console.log(u)})},BindGraph:function(){var e=this;let t=e.reportListingInfo.GRAPH[0];t!=null&&t!=null&&t!=""?(e.chartType=e.chartTypes.find(a=>a.id==t.chartTypeID).chart_Type.toLowerCase(),e.AggregateFuncField=t.AggregateFunction,e.XAxisFieldName=e.FilterColumnlist(t.XAxisField).CustomFieldName,e.YAxisFieldName=e.FilterColumnlist(t.YAxisField).CustomFieldName,e.groupGraphlist.MetaData[0].IsGrouping?e.SetGroupingGraphData(t.AggregateFunction):e.GraphJson=e.groupGraphlist.ListingData,e.SetGraphValues(e.GraphJson,e.XAxisFieldName,e.YAxisFieldName),e.CalculationAggregateFunctionResult(t.AggregateFunction),e.DrawGraph(t)):(e.showgraph=!1,e.showGraphBtn=!1)},SetGroupingGraphData(e){var t=this;let a=t.groupGraphlist.ListingData,l=[],o=t.XAxisFieldName,n=t.YAxisFieldName;a!=null&&a!=null?(a.forEach((d,u)=>{if(d[o]!=null||o!=null)if(e=="Count"||e=="Sum"||e=="Avg"||e=="Min"||e=="Max")for(var h=d[o]!=null?d[o]:d.data[0][o]+` (${d.totalRecord})`,v=0;v<=parseInt(d.totalRecord);v++)v==0&&l.push({[o]:h,[n]:d.GData!=null&&d.GData!=0&&d.GData>d.totalRecord?d.GData:d.totalRecord});else d.data.forEach((s,g)=>{if(g==0){var i=d[o];l.push({[o]:i,[n]:s[n]})}else l.push({[n]:s[n]})});else d.data.forEach((s,g)=>{l.push({[o]:s[o],[n]:s[n]})})}),t.GraphJson=l,t.showgraph=!0):(t.GraphJson=[],t.XAxisFieldName=null,t.YAxisFieldName=null,t.showgraph=!1,t.showGraphBtn=!1)},DrawGraph:function(e){var t=this;(t.chartType=="bar"||t.chartType=="line")&&(t.chartSeries=[{data:t.chartSeriesData}],t.chartOptions={chart:{toolbar:{export:{svg:{filename:t.reportName},png:{filename:t.reportName},csv:{headerCategory:t.FilterColumnlist(e.XAxisField).CustomFieldName,filename:t.reportName}}}},xaxis:{categories:t.chartOptionXAxisData,title:{text:t.FilterColumnlist(e.XAxisField).CustomFieldName},labels:{trim:!0}},yaxis:{title:{text:t.FilterColumnlist(e.YAxisField).CustomFieldName}},dataLabels:{enabled:!0},zoom:{enabled:!0}}),(t.chartType=="pie"||t.chartType=="donut")&&(t.chartSeries=t.chartSeriesData,t.chartOptions={labels:t.chartOptionXAxisData,colors:t.colourList})},SetGraphValues(e,t,a){var l=this;l.chartOptionXAxisData=[],l.chartSeriesData=[],e.forEach(o=>{t in o&&(o[t]!=null&&o[t]!=null?(l.chartOptionXAxisData.push(o[t]),l.BindXYFields(o,t,a)):o[a]!=null&&o[a]!=null&&(typeof t=="string"?l.chartOptionXAxisData=[...l.chartOptionXAxisData,"-"]:l.chartOptionXAxisData=[...l.chartOptionXAxisData,0],l.BindXYFields(o,t,a)))})},BindXYFields:function(e,t,a){var l=this;if(a in e)if(e[a]!=null&&e[a]!=null)if(typeof e[a]=="string"){var o=e[a].replace(/[$€£]/g,"");l.chartSeriesData.push(parseInt(o))}else l.chartSeriesData.push(e[a]);else l.chartSeriesData=[...l.chartSeriesData,0]},FilterColumnlist(e){var t=this;let a=t.reportListingInfo.FIELDS,l,o;for(let[n]of a.entries())a[n].CustomFieldId==e&&(a[n].DisplayName!=null&&a[n].DisplayName!=""?l=a[n].DisplayName:l=a[n].FieldName,o=a[n].ColumnFieldDataCode);return{CustomFieldName:l,ColumnFieldType:o}},CalculationAggregateFunctionResult:function(e){var t=this;if(e=="Sum"){var a=0;t.chartSeriesData.forEach(d=>{a+=d}),t.aggregateFunctionResult=a}if(e=="Count"){var l=0;l=t.chartSeriesData.length,t.aggregateFunctionResult=l}if(e=="Avg"){var o=0,n=0;t.chartSeriesData.forEach(function(d,u){o+=d,n++}),t.aggregateFunctionResult=o/n}e=="Min"&&(t.aggregateFunctionResult=Math.min.apply(Math,t.chartSeriesData.filter(Number))),e=="Max"&&(t.aggregateFunctionResult=Math.max(...t.chartSeriesData))},async GetChartTypes(){var e=this;await L.GetChartTypes().then(t=>{e.chartTypes=t.data})},pagerMethod:function(e){var t=this;e.target.innerHTML=="Prev"?t.PageNumber=t.PageNumber-1:e.target.innerHTML=="Next"?t.PageNumber=parseInt(t.PageNumber)+1:t.PageNumber=e.target.innerHTML,t.PageNumber=="First"&&(t.PageNumber="1"),t.PageNumber=="Last"&&(t.PageNumber=t.TotalPages),parseInt(t.PageNumber)>=1&&t.UpdatePreviewData(t.sortColummnarray)},SetPageSize:function(e){var t=this;t.PageSize=e.target.value,t.PageNumber=1,t.TotalPages=Math.ceil(t.TotalRecords/t.PageSize),t.UpdatePreviewData(t.sortColummnarray)},GetAllRecordsForPDF:function(){},GetDataForPDFListing:async function(e){var t=this;if(t.count=0,t.previewdata.length>0){var a={Info:{REPORTID:t.reportListingInfo.REPORTID,REPORTNAME:t.reportListingInfo.REPORTNAME,MODULENAME:t.reportListingInfo.MODULENAME,SUBMODULECODE:t.reportListingInfo.SUBMODULECODE,SUBMODULEID:t.reportListingInfo.SUBMODULEID,PAGESIZE:t.PageSize,PAGENUMBER:parseInt(t.PageNumber),IS_PAGED:0,IsForPreview:t.IsForPreview,FIELDS:t.reportListingInfo.FIELDS,FILTERS:t.MainUpdatedArray!=null?t.MainUpdatedArray:t.reportListingInfo.FILTERS,GROUP:t.reportListingInfo.GROUP,SORTING:t.MainSortingArray!=null?t.MainSortingArray:t.reportListingInfo.SORTING,EXPRESSION:t.reportListingInfo.EXPRESSION,EXPRESSIONFIELDSARRAY:t.reportListingInfo.EXPRESSIONFIELDSARRAY}},l=JSON.stringify(a);t.ExcelJsonData=l,e==null&&await L.PreviewReport(l).then(o=>{var n=JSON.parse(o.data[0].Value);t.pdfpreviewdata=n,t.count=t.count+1}).catch(o=>{console.log("Data not Found")})}},GetGraphImageURI:async function(){var a;var e=this,t;return await((a=e.$refs.chart)==null?void 0:a.chart.dataURI().then(l=>{t=l})),t},ExportToPDF:async function(e){var t=this;t.isLoading=!0;var a=t.GetTotalRecordsForExceed();if(t.TotalRecords>a)t.confirmR(t.$t("LimitExceed"),!0,t.$t("LimitExceed")+"  "+t.$t("Report"),function(){t.GetPdfAndExcelApi()});else if(await t.GetDataForPDFListing(),t.count!=0){var l={},o=await t.GetGraphImageURI(),n=t.pdfpreviewdata.ListingData;let d=t.pdfpreviewdata.MetaData[0].IsGrouping,u=t.reportListingInfo.REPORTNAME,h="A2",v,s="",g=300;d?await t.BindPDFDataForGroup(n):await t.BindPDFData(n),t.TableHeader.length>5&&(h="A1",g=500),t.TableHeader.length>10&&(s="landscape"),o!=null&&o!=null&&(l={image:o.imgURI,width:g,alignment:"center"}),v={pageSize:h,pageOrientation:s,content:[l,{style:"table",table:{headerRows:1,body:t.TableBody}}],styles:t.SetPDFStyle(),defaultStyle:{alignment:"justify"}},e=="print"?M.createPdf(v).print():M.createPdf(v).download(u),t.isLoading=!1}else t.ShowAlert(t.$t("No_Record_Found"),"danger",!0,t.$t("Alert")),t.isLoading=!1;t.isLoading=!1},BindPDFData:function(e){var t=this;t.TableBody=[],t.TableHeader=[];var a=Object.keys(e[0]);a.forEach(l=>{l!="ROWNUMBER"&&t.TableHeader.push({text:l,style:"tableHeader",alignment:"center"})}),t.TableBody.push(t.TableHeader),e.forEach(l=>{let o=[];t.TableHeader.forEach(n=>{o.push(l[n.text])}),t.TableBody.push(o)})},BindPDFDataForGroup:function(e){var t=this;t.TableBody=[],t.TableHeader=[],t.TableHeader.push({text:Object.keys(e[0])[0],style:"tableHeader",alignment:"center"});var a=Object.keys(e[0].data[0]);a.forEach(l=>{t.TableHeader.push({text:l,style:"tableHeader",alignment:"center"})}),t.TableBody.push(t.TableHeader),e.forEach(l=>{l.data.forEach((o,n)=>{let d=[];t.TableHeader.forEach((u,h)=>{if(n==0&&h==0){var v=`${l[u.text]} (${l.totalRecord})`;d.push({rowSpan:parseInt(l.totalRecord),text:v})}else if(n==1&&h==0)d.push("");else if(o[u.text]!=null&&o[u.text]!="")d.push(o[u.text]);else{var s=o[u.text]="-";d.push(s)}}),t.TableBody.push(d)})})},SetPDFStyle:function(){return{subheader:{fontSize:16,bold:!0,margin:[0,0,0,10]},table:{margin:[0,5,0,15]}}},ExportToExcel:async function(){var e=this,t=e.GetTotalRecordsForExceed();if(e.TotalRecords>t)e.confirmR(e.$t("LimitExceed"),!0,e.$t("LimitExceed")+"  "+e.$t("Report"),function(){e.GetPdfAndExcelApi()});else if(e.isLoading=!0,await e.GetDataForPDFListing("Excel"),e.ExcelJsonData!=null&&e.ExcelJsonData!=null){var a=e.ExcelJsonData,l=`ReportId=${e.reportListingInfo.REPORTID}&pagetype=preview&IsPaged=0`;L.GetExcelReport(l,a).then(o=>{var n=new Blob([o.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;"}),d=document.createElement("a");d.href=window.URL.createObjectURL(n);var u=`ReportData-${e.reportListingInfo.REPORTNAME}-${moment().format("DD/MM/YYYY")}`;u=u.split(" ").join(""),d.download=u,d.click(),e.isLoading=!1}).catch(o=>{console.log(o)})}else e.ShowAlert(e.$t("No_Record_Found"),"danger",!0,e.$t("Alert")),e.isLoading=!1;e.isLoading=!1},EditReport:function(){var e=this;e.$router.push({name:"Datareport",params:{Modulename:e.reportListingInfo.MODULENAME,Submodulecode:e.reportListingInfo.SUBMODULECODE,ReportName:e.reportListingInfo.REPORTNAME,ReportID:e.reportListingInfo.REPORTID,Action:"Edit"}})},DownloadExceedRecords:async function(){var e=this,t={emailPostString:[{configModuleName:"Email",reportId:e.reportListingInfo.REPORTID,reportname:e.reportListingInfo.REPORTNAME,username:V._value.Email,moduleName:e.reportListingInfo.MODULENAME,subModuleCode:e.reportListingInfo.SUBMODULECODE,from:V._value.Name,to:V._value.Email,subject:e.reportListingInfo.REPORTNAME,message:"Greetings! This is the Test Email of Reporting Data with an Excel File Attachment.Find Attachment","importance ":"high",quoteCompanyLogo:"",emailCc:"",emailBcc:"",companyLogo:V._value.CompanyLogo,emailContent:"",forInvoice:"yes",refId:0,isSaveLog:""}]},a={Info:{REPORTID:e.reportListingInfo.REPORTID,REPORTNAME:e.reportListingInfo.REPORTNAME,MODULENAME:e.reportListingInfo.MODULENAME,SUBMODULECODE:e.reportListingInfo.SUBMODULECODE,SUBMODULEID:e.reportListingInfo.SUBMODULEID,PAGESIZE:10,PAGENUMBER:1,IS_PAGED:0,IsForPreview:e.IsForPreview,FIELDS:e.reportListingInfo.FIELDS,FILTERS:e.reportListingInfo.FILTERS,GROUP:e.reportListingInfo.GROUP,SORTING:e.reportListingInfo.SORTING,EXPRESSION:e.reportListingInfo.EXPRESSION,EXPRESSIONFIELDSARRAY:e.reportListingInfo.EXPRESSIONFIELDSARRAY,EmailArray:t}},l=JSON.stringify(a);e.reportListingInfo.REPORTID>0&&(e.isLoading=!0,await L.SendEmailService(l).then(o=>{o.data[0].Status=="Success"&&(e.ShowAlert(e.$t("Email_Sent"),"success",!0,e.$t("Alert")),e.isLoading=!1),e.isLoading=!1}).catch(o=>{console.log(o)}))},OpenSortingPopup:function(){var e=this;e.isSortPopup?e.isSortPopup=!1:e.isSortPopup=!0},AddSortingForm:function(e){var t=this;t.sortColummnarray[0].columnOrders!=""&&t.sortColummnarray[0].sortcolummnId!=""&&t.sortColummnarray.length<t.previewcolumn.length?t.sortColummnarray.push({sortcolummnId:"",columnOrders:""}):t.ShowAlert(t.sortColummnarray[0].columnOrders!=""&&t.sortColummnarray[0].sortcolummnId!=""?t.$t("SortLimitExceed"):t.$t("AddFieldsFirst"),"danger",!0,t.$t("Alert"))},RemoveSortingForm:function(e){var t=this;t.sortColummnarray.length==1?t.sortColummnarray=[{sortcolummnId:"",columnOrders:""}]:t.sortColummnarray.splice(t.sortColummnarray.indexOf(e),1)},EnableSortingSearch:function(e){var t=this;t.sortColummnarray[0].columnOrders!=""&&t.sortColummnarray[0].sortcolummnId!=""&&t.UpdatePreviewData(t.sortColummnarray)},RemoveSortingFromList:function(){var e=this;e.isLoading=!0,e.GetPreviewData(e.$route.params.ReportID),e.MainSortingArray=[],e.noRecord=!1},GetSortingData:function(){var e=this;e.reportListingInfo.SORTING!=null&&e.reportListingInfo.SORTING!=null&&e.reportListingInfo.SORTING!=""&&e.reportListingInfo.SORTING.length>0?(e.sortColummnarray=[],e.reportListingInfo.SORTING.forEach((t,a)=>{e.sortColummnarray.push({sortcolummnId:t.CustomFieldId,columnOrders:t.SORTTYPE})})):e.sortColummnarray=[{sortcolummnId:"",columnOrders:""}]},GetTotalRecordsForExceed(){var e=1e5;return e},GetPdfAndExcelApi(){var e=this;e.isLoading=!0;var t={Info:{REPORTID:e.reportListingInfo.REPORTID,REPORTNAME:e.reportListingInfo.REPORTNAME,MODULENAME:e.reportListingInfo.MODULENAME,SUBMODULECODE:e.reportListingInfo.SUBMODULECODE,SUBMODULEID:e.reportListingInfo.SUBMODULEID,PAGESIZE:10,PAGENUMBER:1,IS_PAGED:0,IsForPreview:e.IsForPreview,FIELDS:e.reportListingInfo.FIELDS,FILTERS:e.MainUpdatedArray!=null?e.MainUpdatedArray:e.reportListingInfo.FILTERS,GROUP:e.reportListingInfo.GROUP,SORTING:e.MainSortingArray!=null?e.MainSortingArray:e.reportListingInfo.SORTING,EXPRESSION:e.reportListingInfo.EXPRESSION,EXPRESSIONFIELDSARRAY:e.reportListingInfo.EXPRESSIONFIELDSARRAY}},a=JSON.stringify(t);L.InsertDynamicReportsLog(a).then(l=>{l.data[0].Status=="Success"?(e.ShowAlert(e.$t("Email_Sent"),"success",!0,e.$t("Alert")),e.isLoading=!1):(e.ShowAlert(e.$t("EmailFailed"),"danger",!0,e.$t("Alert")),e.isLoading=!1)}).catch(l=>{console.log(l.message)})},sortdata:function(e,t){var a=this,l="sort tb_headerSortDown";a.SortBy=e,e===a.SortBy&&(a.SortExp==""||a.SortExp==null?(a.SortExp="ASC",l="sort tb_headerSortDown"):a.SortExp=="ASC"?(a.SortExp="DESC",l="sort tb_headerSortUp"):(a.SortExp="ASC",l="sort tb_headerSortDown")),a.SingleSortArray=[],a.SingleSortArray.push({sortcolummnId:t,columnOrders:a.SortExp}),a.UpdatePreviewData(),$("#"+e+"  span:first-child").attr("class",l)}}},I=e=>(B("data-v-3b75a69e"),e=e(),X(),e),Ke={class:"right-content hr_jobpost w-100"},Qe={class:"col-md-12 p-0 mb-2"},et={class:"theme-primary partition p-actions-expand"},tt={class:"p-name text-white"},at={class:"p-actions float-right mydbsize"},ot=I(()=>r("em",{class:"fa fa-filter"},null,-1)),rt=I(()=>r("br",null,null,-1)),st=I(()=>r("em",{class:"fa fa-pencil text-white action-icon"},null,-1)),lt=I(()=>r("br",null,null,-1)),nt=I(()=>r("em",{class:"fa fa-file-pdf-o"},null,-1)),it=I(()=>r("br",null,null,-1)),dt=I(()=>r("em",{class:"fa fa-file-pdf-o"},null,-1)),pt=I(()=>r("br",null,null,-1)),ut=I(()=>r("em",{class:"fa fa-file-excel-o"},null,-1)),ct=I(()=>r("br",null,null,-1)),mt=I(()=>r("em",{class:"fa fa-pie-chart"},null,-1)),ft=I(()=>r("br",null,null,-1)),ht=I(()=>r("em",{class:"fa fa-sort-amount-asc"},null,-1)),gt=I(()=>r("br",null,null,-1)),Et=I(()=>r("em",{class:"fa fa-angle-double-left"},null,-1)),Dt=I(()=>r("br",null,null,-1)),It=I(()=>r("span",{class:"collapse-head-btns"},[r("a",{href:"javascript:;",class:"collapse-btns"},[r("em",{class:"fa fa-angle-up text-white"})])],-1)),vt={class:"parentdiv datarepfix2"},yt={class:"verticle-action lft75 rt30"},Ot={class:"action-list-box small",style:{width:"400px"}},Rt={key:0,id:"action-list1",class:"text-left p-0 datarep mt-3 w-90 float-left bg_outerdark borderbababa"},St={class:"float-left col-12"},_t=I(()=>r("div",{class:"container-fluid p-0"},null,-1)),Lt={class:"row px-3 pt-3 pb-0"},Ft={class:"col-lg-5 pl-0 pr-3"},bt={class:"form-group mb-0"},Nt={class:"pb-2"},At=["onUpdate:modelValue","id"],Pt=["value","disabled"],Ct={class:"col-lg-5 pl-0 pr-3"},Tt={class:"form-group mb-0"},wt={class:"pb-2"},Vt=["onUpdate:modelValue"],Gt={class:"col-lg-2 pl-0 pr-3 d-flex align-items-center"},xt={class:"form-group mb-0"},Mt=["onClick"],Ut=I(()=>r("em",{class:"fa fa-plus-circle font-24 text-success mt-3"},null,-1)),kt=[Ut],Bt=["onClick"],$t=I(()=>r("em",{class:"fa fa-times-circle font-24 text-danger mt-3 ml-1"},null,-1)),Xt=[$t],Ht=y("\u2004 "),Yt=I(()=>r("span",{class:"fa fa-sort-amount-desc"},null,-1)),zt=y("\u2004 "),jt=I(()=>r("span",{class:"fa fa-times"},null,-1)),Jt=y(" Reset Sort"),qt=[zt,jt,Jt],Zt=I(()=>r("div",{class:"va_lft25 top4"},[r("em",{class:"icon-solid arrow-solid-left text-secondary",style:{"font-size":"20pt"}})],-1)),Wt=I(()=>r("em",{"aria-hidden":"true",class:"fa fa-times text"},null,-1)),Kt=[Wt],Qt={class:"col-md-12 p-0 mb-2"},ea={class:"tab-pane mb-0"},ta={class:"tab-content fsmtabcontrolMobileView",id:"myTabContent"},aa={key:0,class:"card mb-3 probx"},oa={class:"card-header"},ra={class:"card-body",id:"Reportpdf"},sa={class:"row"},la={class:"col-md-12 col-lg-12 text-center"},na={class:"border bg-light position-absolute text-left p-0",style:{"z-index":"99",height:"auto","max-width":"20%"}},ia={class:"graphinfo"},da=I(()=>r("label",null,"X-axis:",-1)),pa=I(()=>r("label",null,"Y-axis:",-1)),ua={key:0},ca={key:1},ma={class:"tab-pane p-0 pb-2 border-0 active",role:"tabpanel",id:"tab-detail-content","aria-labelledby":"tab-detail-content"},fa={class:"listing"},ha={class:"table-responsive table-fix-header"},ga={key:0,class:"table table-bordered mt-0",style:{width:"100%"},"aria-label":"NO Record Found"},Ea=I(()=>r("thead",null,[r("th",{scope:"col"})],-1)),Da={style:{cursor:"initial"}},Ia={colspan:"4"},va={class:"text-center text-danger d-flex align-items-center justify-content-center norecs"},ya={class:"table table-bordered mt-0",style:{width:"100%"},id:"Reportpdf","aria-label":"View Record"},Oa={class:"thead-bg"},Ra=["onClick"],Sa=["rowspan"],_a=["innerHTML"],La={key:1},Fa=["innerHTML"];function ba(e,t,a,l,o,n){const d=P("loader"),u=P("VueApexCharts"),h=P("Pager"),v=P("modalViewCustomReportFilter");return p(),c(R,null,[C(d,{"is-visible":o.isLoading},null,8,["is-visible"]),r("div",Ke,[r("div",Qe,[r("div",et,[r("span",tt,E(o.reportName),1),r("span",at,[r("a",{onClick:t[0]||(t[0]=(...s)=>n.OpenFilter&&n.OpenFilter(...s)),class:T((o.isFilterExist>0,"p-action-btn text-white dash"))},[ot,rt,y(E(e.$t("Filter")),1)],2),r("a",{onClick:t[1]||(t[1]=(...s)=>n.EditReport&&n.EditReport(...s)),class:T(o.CanEdit==!0?"p-action-btn text-white dash":"p-action-btn text-white dash d-none"),title:"Edit Report"},[st,lt,y(E(e.$t("Edit")),1)],2),r("a",{onClick:t[2]||(t[2]=s=>n.ExportToPDF("download")),class:"p-action-btn text-white dash","data-original-title":"ExportToPDF"},[nt,it,y(E(e.$t("PDF")),1)]),r("a",{onClick:t[3]||(t[3]=s=>n.ExportToPDF("print")),class:"p-action-btn text-white dash","data-original-title":"Print"},[dt,pt,y(E(e.$t("PRINT")),1)]),r("a",{onClick:t[4]||(t[4]=(...s)=>n.ExportToExcel&&n.ExportToExcel(...s)),class:"p-action-btn text-white dash","data-original-title":"ExportToExcel"},[ut,ct,y(E(e.$t("Excel")),1)]),w(r("a",{onClick:t[5]||(t[5]=(...s)=>n.OpenGraph&&n.OpenGraph(...s)),class:"p-action-btn text-white dash"},[mt,ft,y(E(o.showgraph?e.$t("CollapseGraph"):e.$t("ExpandGraph")),1)],512),[[x,o.showGraphBtn]]),r("a",{onClick:t[6]||(t[6]=(...s)=>n.OpenSortingPopup&&n.OpenSortingPopup(...s)),class:"p-action-btn text-white dash","data-original-title":"Sort"},[ht,gt,y(E(e.$t("Sort")),1)]),r("a",{onClick:[t[7]||(t[7]=(...s)=>n.OnBack&&n.OnBack(...s)),t[8]||(t[8]=(...s)=>e.ResetData&&e.ResetData(...s))],class:"p-action-btn text-white dash","data-original-title":"Back"},[Et,Dt,y(E(e.$t("Back")),1)])]),It]),r("div",vt,[r("div",yt,[r("span",Ot,[o.isSortPopup?(p(),c("span",Rt,[r("div",St,[_t,(p(!0),c(R,null,S(o.sortColummnarray,(s,g)=>(p(),c("div",Lt,[r("div",Ft,[r("div",bt,[r("label",Nt,E(e.$t("SortBy")),1),w(r("select",{"onUpdate:modelValue":i=>s.sortcolummnId=i,class:"form-control",id:"SortValue"+g},[(p(!0),c(R,null,S(o.reportListingInfo.FIELDS.filter(i=>i.Calculated_Field==!1),i=>(p(),c("option",{value:i.CustomFieldId!=""?i.CustomFieldId:i.FieldName,key:i.CustomFieldId,disabled:o.sortColummnarray.filter(O=>O.sortcolummnId==i.CustomFieldId).length>0},E(i.DisplayName?e.GetLocalizedValue(i.DisplayName):e.GetLocalizedValue(i.FieldName)),9,Pt))),128))],8,At),[[U,s.sortcolummnId]])])]),r("div",Ct,[r("div",Tt,[r("label",wt,E(e.$t("OrderBy")),1),w(r("select",{"onUpdate:modelValue":i=>s.columnOrders=i,class:"form-control"},[r("option",null,E(e.$t("ASC")),1),r("option",null,E(e.$t("DESC")),1)],8,Vt),[[U,s.columnOrders]])])]),r("div",Gt,[r("div",xt,[r("a",{onClick:i=>n.AddSortingForm(s)},kt,8,Mt),w(r("a",{onClick:i=>n.RemoveSortingForm(s)},Xt,8,Bt),[[x,o.sortColummnarray[0].sortcolummnId!=""]])])])]))),256)),r("a",{class:"btn btn-success my-3 mr-2 pl-1",onClick:t[9]||(t[9]=s=>n.EnableSortingSearch(e.input))},[Ht,Yt,y(E(e.$t(" SORT")),1)]),r("a",{class:"btn btn-danger pl-1 mb-0",onClick:t[10]||(t[10]=s=>n.RemoveSortingFromList())},qt)]),Zt,r("button",{type:"button",class:"close closebtnsmall",onClick:t[11]||(t[11]=s=>o.isSortPopup=!1)},Kt)])):D("",!0)])])])]),r("div",Qt,[r("div",ea,[r("div",ta,[o.showgraph?(p(),c("div",aa,[r("div",oa,[r("h2",null,E(e.$t("Graph")),1)]),r("div",ra,[r("div",sa,[r("div",la,[r("div",na,[r("ul",ia,[r("li",null,[da,y(" "+E(e.GetLocalizedValue(o.XAxisFieldName)),1)]),r("li",null,[pa,y(" "+E(e.GetLocalizedValue(o.YAxisFieldName)),1)]),w(r("li",null,[r("label",null,"# "+E(o.AggregateFuncField)+":",1),y(E(o.aggregateFunctionResult),1)],512),[[x,o.aggregateFunctionResult!=0]])])]),o.chartType=="line"||o.chartType=="bar"?(p(),c("div",ua,[C(u,{ref:"chart",type:o.chartType,height:"auto",width:"40%",options:o.chartOptions,series:o.chartSeries},null,8,["type","options","series"])])):D("",!0),o.chartType=="pie"||o.chartType=="donut"?(p(),c("div",ca,[C(u,{ref:"chart",type:o.chartType,height:"auto",width:"40%",options:o.chartOptions,series:o.chartSeries},null,8,["type","options","series"])])):D("",!0)])])])])):D("",!0),r("div",ma,[r("div",fa,[r("div",ha,[e.noRecord?(p(),c("table",ga,[Ea,r("tbody",null,[r("tr",Da,[r("td",Ia,[r("div",va,E(e.$t("NoRecordfound")),1)])])])])):D("",!0),r("table",ya,[r("thead",Oa,[r("tr",null,[o.showdata?(p(!0),c(R,{key:0},S(o.previewgroupdata,(s,g)=>(p(),c("th",{scope:"col",key:g},E(e.GetLocalizedValue(s.DisplayName!=null&&s.DisplayName!=""?s.DisplayName:s.FieldName)),1))),128)):D("",!0),(p(!0),c(R,null,S(o.previewcolumn,(s,g)=>(p(),c("th",{scope:"col",key:g},[r("span",{onClick:i=>n.sortdata(s.FieldName,s.CustomFieldId),class:T({sort:!0,tb_headerSortUp:o.SortExp=="ASC"&&o.SortBy==s.FieldName,tb_headerSortDown:o.SortExp=="DESC"&&o.SortBy==s.FieldName})},E(e.GetLocalizedValue(s.DisplayName!=null&&s.DisplayName!=""?s.DisplayName:s.FieldName)),11,Ra)]))),128))])]),(p(!0),c(R,null,S(o.previewdata,(s,g)=>(p(),c("tbody",null,[o.showdata?(p(!0),c(R,{key:0},S(o.previewdata[g].data,(i,O)=>(p(),c("tr",null,[O==0?(p(!0),c(R,{key:0},S(o.previewgroupdata,(f,m)=>(p(),c("td",{class:T({onlyrtbod:!0,"":s.totalRecord==null}),rowspan:s.totalRecord},E(f.DisplayName!=null&&f.DisplayName!=""?s[f.DisplayName]:s[f.FieldName])+" ("+E(s.totalRecord)+")",11,Sa))),256)):D("",!0),(p(!0),c(R,null,S(o.previewcolumn,(f,m)=>(p(),c("td",{key:m},[r("span",{innerHTML:i[f.DisplayName]!=null&&i[f.DisplayName]!=""?i[f.DisplayName]||i[f.DisplayName]==0?i[f.DisplayName]:"-":i[f.FieldName]||i[f.FieldName]==0?i[f.FieldName]:"-"},null,8,_a)]))),128))]))),256)):D("",!0),o.showcoldata?(p(),c("tr",La,[(p(!0),c(R,null,S(o.previewcolumn,(i,O)=>(p(),c("td",{key:O},[r("span",{innerHTML:s[i.DisplayName]!=null&&s[i.DisplayName]!=""?s[i.DisplayName]||s[i.DisplayName]==0?s[i.DisplayName]:"-":s[i.FieldName]||s[i.FieldName]==0?s[i.FieldName]:"-"},null,8,Fa)]))),128))])):D("",!0)]))),256))])]),C(h,{class:T({"d none":!0,"":o.TotalRecords>10}),numberofrecords:o.TotalRecords,"prev-text":"Prev","first-text":"First","last-text":"Last","next-text":"Next",onClick:n.pagerMethod,onChange:n.SetPageSize},null,8,["class","numberofrecords","onClick","onChange"])])])])])])]),o.showViewCustomReportFilter?(p(),N(v,{key:0,onClose:t[12]||(t[12]=s=>o.showViewCustomReportFilter=!1),reportListingInfo:o.reportListingInfo},null,8,["reportListingInfo"])):D("",!0)],64)}var Ta=k(We,[["render",ba],["__scopeId","data-v-3b75a69e"]]);export{Ta as default};
